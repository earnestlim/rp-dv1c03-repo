pipeline {
  agent {
    node {
      label 'master'
    }
  }
  tools {
    maven 'maven3'
  }
  options {
    buildDiscarder logRotator(
      daysToKeepStr: '15',
      numToKeepStr: '10'
    )
  }
  environment {
    APP_NAME = "STUDENT_APP"
    APP_ENV = "DEV"
  }
  stages {
    stage('Cleanup Workspace') {
      steps {
        cleanWs()
        sh """
          echo "Cleaned Up Workspace for ${APP_NAME}"
        """
      }
    }
    stage('Code Checkout') {
      steps {
        checkout([
          $class: 'GitSCM',
          branches: [[name: '*/main']],
          userRemoteConfigs: [[url: 'https://github.com/earnestlim/rp-dv1c03-repo']] 1  Â  
        ])
      }
    }
    stage('Code Build') {
      steps {
        sh 'mvn install -Dmaven.test.skip=false'
      }
    }
    stage('Parallel Processing') {
      parallel {
        stage('Additional Processing (3A)') {
          steps {
            sh '// Add your specific steps for stage 3A'
          }
        }
        stage('Additional Processing (3B)') {
          steps {
            sh '// Add your specific commands for stage 3B'
          }
        }
      }
    }
    stage('Test') {
      steps {
        // Add your test steps here
        sh 'mvn test'
      }
    }
    stage('Deploy') {
      steps {
        // Add your deployment steps here
        sh '// Deploy to your target environment'
      }
    }
  }
}
